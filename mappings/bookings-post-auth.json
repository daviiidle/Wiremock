{
  "request": {
    "method": "POST",
    "urlPath": "/bookings",
    "headers": {
      "Content-Type": {
        "contains": "application/json"
      },
      "Authorization": {
        "equalTo": "Bearer banking-api-key-2024"
      }
    },
    "bodyPatterns": [
      {
        "matchesJsonPath": "$.customerId"
      },
      {
        "matchesJsonPath": "$.productType"
      },
      {
        "matchesJsonPath": "$.productId"
      }
    ]
  },
  "response": {
    "status": 201,
    "headers": {
      "Content-Type": "application/json",
      "X-Correlation-Id": "{{request.headers.X-Correlation-Id}}"
    },
    "jsonBody": {
      "bookingId": "BOOK{{randomValue length=6 type='NUMERIC'}}",
      "customerId": "{{jsonPath request.body '$.customerId'}}",
      "productType": "{{jsonPath request.body '$.productType'}}",
      "productId": "{{jsonPath request.body '$.productId'}}",
      "bookingDate": "{{#if (jsonPath request.body '$.bookingDate')}}{{jsonPath request.body '$.bookingDate'}}{{else}}{{now offset='+1 day' format='yyyy-MM-dd'}}{{/if}}",
      "bookingTime": "{{#if (jsonPath request.body '$.bookingTime')}}{{jsonPath request.body '$.bookingTime'}}{{else}}10:00{{/if}}",
      "status": "{{#if (jsonPath request.body '$.status')}}{{jsonPath request.body '$.status'}}{{else}}active{{/if}}",
      "priority": "{{#if (jsonPath request.body '$.priority')}}{{jsonPath request.body '$.priority'}}{{else}}normal{{/if}}",
      "description": "{{#if (jsonPath request.body '$.description')}}{{jsonPath request.body '$.description'}}{{else}}{{/if}}",
      "createdAt": "{{now format='yyyy-MM-dd HH:mm:ss'}}"
    },
    "transformers": ["response-template"]
  }
}